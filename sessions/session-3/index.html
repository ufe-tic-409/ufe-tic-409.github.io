<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Session 3 - Structural Patterns</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../../styles/style.css" />
  </head>
  <body>
    <div class="container">
      <div style="display: flex; flex-direction: row; align-items: center; margin-bottom: 50px;">
        <img
          class="logo"
          src="../../assets/ufe-logo.png"
          alt="UFE Logo"
          style="margin-right: 10px"
        />
        <div style="display: flex; flex-direction: column">
          <h1 style="margin-bottom: 0;" class="primary-color">TIC 409 Advanced OOP</h1>
          <h2 style="margin-top: 0;" class="primary-color">Session 2 : Structural patterns</h2>
        </div>
      </div>
      <div>
        <h3>ðŸŽ„ Decorator pattern (aka. Wrapper)</h3>
        <div>
            <h4>Intent</h4>
            <blockquote>
                Attach additional responsibilities to an object (not a class) dynamically. Decorators provide a flexible alternative to subclassing for extending functionality.
            </blockquote>
        </div>
        <div>
            <h4>Diagram</h4>
            <img style="width: 50%;" src="./assets/decorator-diagram.png" alt="Decorator diagram">
        </div>
        <div>
            <h4>Example</h4>
            <p>
              You are creating you sci-fi game. In your game, you can own a spaceship. Your spaceship has a basic gun and a basic shield. You can customize your spaceship by attaching addons to it. In our example your will be able to attach <strong>Laser gun</strong> to improve your attack. You can also equip a <strong>Point-defense cannon</strong> to improve your defense.
            </p>
            <small>
              <i>
                We don't care about how much those addons will impact your attack and defense we will be focusing on ensuring they are activated at the correct time if they are attached to your spaceship. Also a spaceship may have any combination of the above equipments.
              </i>
            </small>
            <div class="starter-code">
              <a href="https://github.com/ufe-tic-409/design-patterns-examples/tree/31aac56e0011d8237d38ca63bf5ed18a96e59c03/src/main/java/io/gawish/decorator">Starter code</a></div>
          <h5>Questions</h5>
          <ol>
            <li>Start by copying the start code and reading it. What do you think about the code structure ?</li>
            <li>Let's assume we wanted to add a new Attack weapon. How hard will it be ? Why ?</li>
            <li>Start by implementing the decorator pattern to improve the code structure. <a href="https://github.com/ufe-tic-409/design-patterns-examples/tree/bbdbc72ceee6381fbc85c67d34530710c1d25cf7/src/main/java/io/gawish/decorator">[code]</a></li>
            <li>How hard would it be to create a `downgrade` method that detaches the last attachment ?</li>
            <li>Is there any other method way to create the same functionality using a different approach ? Will it remain as flexible the builder pattern ?</li>
          </ol>
        </div>
      </div>
      <hr style="width: 100%; margin: 50px 0;">
      <div>
        <h3>ðŸª† Composite pattern (aka. Object tree)</h3>
        <div>
            <h4>Intent</h4>
            <blockquote>
                Compose objects into tree structures to represent part-whole hierarchies. Composite lets clients treat individual objects and compositions of objects uniformly.
            </blockquote>
        </div>
        <div>
            <h4>Diagram</h4>
            <img style="width: 50%;" src="./assets/composite-diagram.png" alt="Composite diagram">
        </div>
        <div>
            <h4>Example</h4>
            <p>
              You are creating an RPG (Role-playing game). In your game, your character carries a bag in which he can put the weapons he finds while hunting. The player's movement is affected by the weight of the weapons he's carrying, so it is important to know the total weight of the bag he's carrying. <strong>A bag can carry a maximum of 5 items</strong>. However, a player can extend the number of items he can carry by adding a new bag to his bag and thus increase the maximum amount of items he can carry.
            </p>
            <figure>
              <img src="./assets/composite-reference-image.jpg" alt="Tibia's backpack system">
              <figcaption>
                <a href="https://www.tibia.com/news/?subtopic=latestnews">Tibia</a>'s backpack system
              </figcaption>
            </figure>
            <div class="starter-code">
              <a href="https://github.com/ufe-tic-409/design-patterns-examples/tree/ada0701643be23adc2e24ac2658bf6d06a588916/src/main/java/io/gawish/composite">Starter code</a></div>
          <h5>Questions</h5>
          <ol>
            <li>
              Start by copying the start code and reading it. What do you think about the code structure ?
            </li>
            <li>
              Improve the code structure and remove duplication by implementing the composite pattern. <a href="https://github.com/ufe-tic-409/design-patterns-examples/tree/225f6291c593205d0eeabd63c31eff36056d86fa/src/main/java/io/gawish/composite">[code]</a>
            </li>
            <li>
              How would you prevent someone from unintentionally using <strong>addCariable()</strong> on an item (ex. <strong>sword1.addCarriable(sword2)</strong>) ? <a href="https://github.com/ufe-tic-409/design-patterns-examples/tree/89eb388cc3c00feaca6a2b810c893fa1e09a72a8/src/main/java/io/gawish/composite">[code]</a>
            </li>
            <li>
              How would you implement the method <strong>item.drop()</strong> to remove an item from its bag ? <a href="https://github.com/ufe-tic-409/design-patterns-examples/tree/0208bacd1f86ec2de54665e283c35647ef41b96c/src/main/java/io/gawish/composite">[code]</a>
            </li>
            <li>
              Does this exercice remind you of an exercise we did in last year's OOP course ?
            </li>
            <li>
              <strong class="primary-color">[Caching variation]</strong> How would you go about using caching in container objects to avoid recalculating the weights each time?
            </li>
          </ol>
        </div>
      </div>
    </div>
  </body>
</html>
